<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APavan_Controle de Slump - Sistema de Ajuste de Trabalhabilidade</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #1e293b 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, #ea580c 0%, #f97316 100%);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 4px solid #fb923c;
            margin-bottom: 40px;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .header-icon {
            background: white;
            padding: 15px;
            border-radius: 15px;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-icon svg {
            width: 40px;
            height: 40px;
            fill: #ea580c;
        }

        .header h1 {
            font-family: Impact, sans-serif;
            font-size: 48px;
            color: white;
            letter-spacing: 1px;
            font-weight: 900;
            text-transform: uppercase;
        }

        .header-subtitle {
            color: #fed7aa;
            font-size: 20px;
            font-weight: 600;
            margin-top: 5px;
        }

        .header-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .badge {
            background: white;
            color: #ea580c;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
        }

        .badge.dark {
            background: #9a3412;
            color: white;
        }

        /* Grid Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 4px solid #e2e8f0;
            padding: 40px;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
            border-bottom: 4px solid #f97316;
            margin-bottom: 30px;
        }

        .card-header svg {
            width: 30px;
            height: 30px;
            fill: #ea580c;
        }

        .card-header h2 {
            font-family: 'Arial Black', sans-serif;
            font-size: 28px;
            color: #1e293b;
            font-weight: 900;
        }

        /* Form Sections */
        .form-section {
            background: #f8fafc;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            margin-bottom: 25px;
        }

        .form-section h3 {
            font-weight: bold;
            color: #475569;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: bold;
            color: #64748b;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #cbd5e1;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        .form-group input[type="number"] {
            font-size: 20px;
        }

        /* Button */
        .btn-calculate {
            width: 100%;
            background: linear-gradient(90deg, #ea580c 0%, #f97316 100%);
            color: white;
            padding: 25px;
            border: none;
            border-radius: 15px;
            font-family: Impact, sans-serif;
            font-size: 24px;
            font-weight: 900;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(234, 88, 12, 0.3);
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .btn-calculate:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 40px rgba(234, 88, 12, 0.4);
        }

        .btn-calculate:active {
            transform: scale(0.98);
        }

        /* Results */
        .results-container {
            display: none;
        }

        .results-container.show {
            display: block;
        }

        .status-card {
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            border: 4px solid;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .status-card.adequado,
        .status-card.permitida {
            background: #ecfdf5;
            border-color: #10b981;
        }

        .status-card.permitida-ressalvas {
            background: #fffbeb;
            border-color: #f59e0b;
        }

        .status-card.nao-permitida,
        .status-card.nao-conforme-alto {
            background: #fef2f2;
            border-color: #ef4444;
        }

        .status-header {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 25px;
        }

        .status-icon {
            width: 40px;
            height: 40px;
            flex-shrink: 0;
        }

        .status-icon.success {
            fill: #10b981;
        }

        .status-icon.warning {
            fill: #f59e0b;
        }

        .status-icon.error {
            fill: #ef4444;
        }

        .status-content h2 {
            font-family: 'Arial Black', sans-serif;
            font-size: 28px;
            color: #1e293b;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .status-content p {
            color: #475569;
            font-weight: 600;
            font-size: 18px;
            line-height: 1.6;
        }

        /* Data Box */
        .data-box {
            background: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .data-box.highlight {
            background: #fff7ed;
            border-color: #fb923c;
        }

        .data-box.blue {
            background: #eff6ff;
            border-color: #60a5fa;
        }

        .data-box.purple {
            background: #faf5ff;
            border-color: #a78bfa;
        }

        .data-label {
            font-size: 12px;
            font-weight: bold;
            color: #64748b;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .data-value {
            font-size: 36px;
            font-weight: 900;
            color: #1e293b;
        }

        .data-box.highlight .data-label {
            color: #9a3412;
        }

        .data-box.highlight .data-value {
            color: #ea580c;
        }

        .data-box.blue .data-label {
            color: #1e40af;
        }

        .data-box.blue .data-value {
            color: #2563eb;
        }

        .data-box.purple .data-label {
            color: #6b21a8;
        }

        .data-box.purple .data-value {
            color: #7c3aed;
        }

        .data-sub {
            font-size: 14px;
            font-weight: 600;
            margin-top: 5px;
        }

        .data-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Risks */
        .risks-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            border: 4px solid #fbbf24;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }

        .risks-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .risks-header svg {
            width: 30px;
            height: 30px;
            fill: #f59e0b;
        }

        .risks-header h3 {
            font-family: 'Arial Black', sans-serif;
            font-size: 22px;
            color: #1e293b;
            font-weight: 900;
        }

        .risks-list {
            list-style: none;
        }

        .risks-list li {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            color: #475569;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .risks-list li::before {
            content: "▸";
            color: #f59e0b;
            font-weight: 900;
            font-size: 20px;
            flex-shrink: 0;
        }

        /* Alert */
        .alert-card {
            background: #dc2626;
            border: 4px solid #b91c1c;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            margin-bottom: 30px;
        }

        .alert-content {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .alert-content svg {
            width: 35px;
            height: 35px;
            fill: white;
            flex-shrink: 0;
        }

        .alert-content h3 {
            font-family: 'Arial Black', sans-serif;
            font-size: 22px;
            color: white;
            font-weight: 900;
            margin-bottom: 15px;
        }

        .alert-content p {
            color: white;
            font-weight: 600;
            font-size: 18px;
            line-height: 1.6;
        }

        /* Executive Summary */
        .summary-card {
            background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
            border-radius: 20px;
            padding: 40px;
            border: 4px solid #475569;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            margin-bottom: 30px;
        }

        .summary-card h3 {
            font-family: 'Arial Black', sans-serif;
            font-size: 28px;
            color: white;
            font-weight: 900;
            margin-bottom: 25px;
        }

        .summary-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .summary-content p {
            color: white;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .summary-label {
            color: #fb923c;
            font-weight: 900;
        }

        .summary-action {
            color: #6ee7b7;
            font-weight: 900;
            font-size: 18px;
            padding-top: 15px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
            margin-top: 15px;
        }

        .summary-action.reject {
            color: #fca5a5;
        }

        .summary-footer {
            color: #cbd5e1;
            font-size: 14px;
            padding-top: 20px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
            margin-top: 20px;
        }

        /* Empty State */
        .empty-state {
            background: white;
            border-radius: 20px;
            padding: 80px 40px;
            text-align: center;
            border: 4px solid #e2e8f0;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            fill: #cbd5e1;
            margin-bottom: 25px;
        }

        .empty-state p {
            color: #94a3b8;
            font-weight: bold;
            font-size: 18px;
        }

        /* Footer */
        .footer {
            background: #334155;
            border-radius: 15px;
            padding: 30px;
            border: 2px solid #475569;
            text-align: center;
        }

        .footer p {
            color: #cbd5e1;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .footer p:last-child {
            color: #94a3b8;
            font-size: 12px;
            margin-bottom: 0;
        }

        /* Utilities */
        .hidden {
            display: none;
        }

        .mb-20 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="header-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 2v6.5l-3 3V22h12V11.5l-3-3V2H9zm2 2h2v3h-2V4zm0 5h2v2h-2V9zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z"/>
                    </svg>
                </div>
                <div>
                    <h1>APavan_CONTROLE DE SLUMP</h1>
                    <p class="header-subtitle">Sistema de Ajuste de Trabalhabilidade do Concreto Fresco</p>
                </div>
            </div>
            <div class="header-badges">
                <span class="badge">ABNT NBR 12655</span>
                <span class="badge">NBR NM 67</span>
                <span class="badge dark">Controle Tecnológico</span>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Form Column -->
            <div>
                <div class="card">
                    <div class="card-header">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                        </svg>
                        <h2>DADOS DA CARGA</h2>
                    </div>

                    <form id="slumpForm">
                        <!-- Slump Section -->
                        <div class="form-section">
                            <h3>SLUMP (mm)</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Medido *</label>
                                    <input type="number" id="slumpMedido" required placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>Projeto *</label>
                                    <input type="number" id="slumpProjeto" required placeholder="0">
                                </div>
                            </div>
                        </div>

                        <!-- Traço Section -->
                        <div class="form-section">
                            <h3>CARACTERÍSTICAS DO TRAÇO</h3>
                            <div class="form-grid mb-20">
                                <div class="form-group">
                                    <label>Volume (m³) *</label>
                                    <input type="number" step="0.1" id="volume" required placeholder="0.0">
                                </div>
                                <div class="form-group">
                                    <label>Cimento (kg/m³) *</label>
                                    <input type="number" id="consumoCimento" required placeholder="0">
                                </div>
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Relação a/c *</label>
                                    <input type="number" step="0.01" id="relacaoAC" required placeholder="0.00">
                                </div>
                                <div class="form-group">
                                    <label>Água (L/m³) *</label>
                                    <input type="number" id="aguaPrevista" required placeholder="0">
                                </div>
                            </div>
                        </div>

                        <!-- Materiais Section -->
                        <div class="form-section">
                            <h3>MATERIAIS</h3>
                            <div class="form-grid mb-20">
                                <div class="form-group">
                                    <label>Tipo de Cimento</label>
                                    <select id="tipoCimento">
                                        <option value="CP I">CP I</option>
                                        <option value="CP II" selected>CP II</option>
                                        <option value="CP III">CP III</option>
                                        <option value="CP IV">CP IV</option>
                                        <option value="CP V-ARI">CP V-ARI</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Agregado</label>
                                    <select id="tipoAgregado">
                                        <option value="Brita 0">Brita 0</option>
                                        <option value="Brita 1" selected>Brita 1</option>
                                        <option value="Brita 2">Brita 2</option>
                                        <option value="Seixo">Seixo</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Aditivo em Uso</label>
                                <select id="aditivo">
                                    <option value="nenhum" selected>Nenhum</option>
                                    <option value="plastificante">Plastificante</option>
                                    <option value="superplastificante">Superplastificante</option>
                                </select>
                            </div>
                        </div>

                        <!-- Condições Section -->
                        <div class="form-section">
                            <h3>CONDIÇÕES DE OBRA</h3>
                            <div class="form-grid mb-20">
                                <div class="form-group">
                                    <label>Temperatura (°C) *</label>
                                    <input type="number" id="temperatura" required placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>Idade (minutos) *</label>
                                    <input type="number" id="idadeConcreto" required placeholder="0">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Elemento Estrutural</label>
                                <select id="elementoEstrutural">
                                    <option value="laje" selected>Laje</option>
                                    <option value="viga">Viga</option>
                                    <option value="pilar">Pilar</option>
                                    <option value="bloco">Bloco de Fundação</option>
                                    <option value="fundacao">Fundação</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="btn-calculate">CALCULAR AJUSTE</button>
                    </form>
                </div>
            </div>

            <!-- Results Column -->
            <div>
                <!-- Empty State -->
                <div id="emptyState" class="empty-state">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 2v6.5l-3 3V22h12V11.5l-3-3V2H9zm2 2h2v3h-2V4zm0 5h2v2h-2V9zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z"/>
                    </svg>
                    <p>Preencha os dados da carga e clique em CALCULAR AJUSTE</p>
                </div>

                <!-- Results Container -->
                <div id="resultsContainer" class="results-container">
                    <!-- Status Card -->
                    <div id="statusCard" class="status-card">
                        <div class="status-header">
                            <svg id="statusIcon" class="status-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"></svg>
                            <div class="status-content">
                                <h2 id="statusTitle"></h2>
                                <p id="statusMessage"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Technical Data Card -->
                    <div class="card">
                        <div class="card-header">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                            </svg>
                            <h2>DADOS TÉCNICOS</h2>
                        </div>

                        <div class="data-grid">
                            <div class="data-box">
                                <div class="data-label">SLUMP MEDIDO</div>
                                <div class="data-value" id="displaySlumpMedido">0 mm</div>
                            </div>
                            <div class="data-box">
                                <div class="data-label">SLUMP PROJETO</div>
                                <div class="data-value" id="displaySlumpProjeto">0 mm</div>
                            </div>
                        </div>

                        <div id="diferencaBox" class="data-box highlight hidden">
                            <div class="data-label">DIFERENÇA</div>
                            <div class="data-value" id="displayDiferenca">0 mm</div>
                        </div>

                        <div id="aguaBox" class="data-box blue hidden">
                            <div class="data-label">ÁGUA ADICIONAL MÁXIMA</div>
                            <div class="data-value" id="displayAgua">0 L</div>
                            <div class="data-sub" id="displayAguaM3"></div>
                        </div>

                        <div id="acGrid" class="data-grid hidden">
                            <div class="data-box">
                                <div class="data-label">a/c ORIGINAL</div>
                                <div class="data-value" id="displayACOriginal">0.00</div>
                            </div>
                            <div class="data-box">
                                <div class="data-label">NOVA a/c</div>
                                <div class="data-value" id="displayNovaAC">0.00</div>
                            </div>
                        </div>

                        <div id="aditivoBox" class="data-box purple hidden">
                            <div class="data-label">ADITIVO RECOMENDADO</div>
                            <div class="data-value" id="displayAditivo">0 L</div>
                            <div class="data-sub" id="displayAditivoPercent"></div>
                        </div>
                    </div>

                    <!-- Risks Card -->
                    <div id="risksCard" class="risks-card hidden">
                        <div class="risks-header">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                            </svg>
                            <h3>RISCOS TÉCNICOS</h3>
                        </div>
                        <ul id="risksList" class="risks-list"></ul>
                    </div>

                    <!-- Alert Card -->
                    <div id="alertCard" class="alert-card hidden">
                        <div class="alert-content">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                            </svg>
                            <div>
                                <h3>ALERTA NORMATIVO</h3>
                                <p id="alertText"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Executive Summary -->
                    <div class="summary-card">
                        <h3>RESUMO EXECUTIVO PARA OBRA</h3>
                        <div class="summary-content">
                            <p><span class="summary-label">DATA/HORA:</span> <span id="summaryData"></span></p>
                            <p><span class="summary-label">VOLUME:</span> <span id="summaryVolume"></span></p>
                            <p><span class="summary-label">ELEMENTO:</span> <span id="summaryElemento"></span></p>
                            <p><span class="summary-label">SLUMP:</span> <span id="summarySlump"></span></p>
                            <p id="summaryAction" class="summary-action"></p>
                            <p class="summary-footer">Registro efetuado pelo sistema de controle tecnológico conforme NBR 12655</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Sistema desenvolvido em conformidade com ABNT NBR 12655:2015 (Concreto de cimento Portland - Preparo, controle, recebimento e aceitação) e NBR NM 67:1998 (Concreto - Determinação da consistência pelo abatimento do tronco de cone)</p>
            <p>© 2026 - Controle Tecnológico do Concreto - Todos os cálculos devem ser validados por engenheiro responsável</p>
        </div>
    </div>

    <script>
        document.getElementById('slumpForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calcularAjuste();
        });

        function calcularAjuste() {
            // Coletar dados do formulário
            const slumpMedido = parseFloat(document.getElementById('slumpMedido').value);
            const slumpProjeto = parseFloat(document.getElementById('slumpProjeto').value);
            const volume = parseFloat(document.getElementById('volume').value);
            const consumoCimento = parseFloat(document.getElementById('consumoCimento').value);
            const relacaoACProjeto = parseFloat(document.getElementById('relacaoAC').value);
            const aguaPrevista = parseFloat(document.getElementById('aguaPrevista').value);
            const tipoCimento = document.getElementById('tipoCimento').value;
            const tipoAgregado = document.getElementById('tipoAgregado').value;
            const aditivo = document.getElementById('aditivo').value;
            const temperatura = parseFloat(document.getElementById('temperatura').value);
            const idadeConcreto = parseFloat(document.getElementById('idadeConcreto').value);
            const elementoEstrutural = document.getElementById('elementoEstrutural').value;

            // Calcular diferença
            const diferencaSlump = slumpMedido - slumpProjeto;

            let resultado = {};

            // Slump adequado (tolerância ±10mm)
            if (Math.abs(diferencaSlump) <= 10) {
                resultado = {
                    classificacao: 'adequado',
                    titulo: 'SLUMP ADEQUADO',
                    mensagem: 'Slump dentro da tolerância aceitável (±10mm)',
                    permitido: true,
                    aguaAdicional: 0,
                    aditivoRecomendado: 0,
                    riscos: []
                };
            }
            // Slump alto (excesso de água)
            else if (diferencaSlump > 10) {
                resultado = {
                    classificacao: 'nao-conforme-alto',
                    titulo: 'NÃO CONFORMIDADE',
                    mensagem: `Slump ${diferencaSlump.toFixed(0)}mm acima do especificado. Concreto excessivamente fluido. REJEITAR CARGA.`,
                    permitido: false,
                    aguaAdicional: 0,
                    aditivoRecomendado: 0,
                    riscos: [
                        'Possível excesso de água',
                        'Comprometimento da resistência',
                        'Aumento da retração',
                        'Segregação do concreto',
                        'Exsudação excessiva'
                    ],
                    alertaNormativo: 'NBR 12655: Concreto com características fora da especificação deve ser rejeitado.'
                };
            }
            // Slump baixo - necessita correção
            else {
                const slumpNecessario = Math.abs(diferencaSlump);
                
                // Fator de correção base
                let fatorCorrecao = 2.5;
                
                // Ajustes por temperatura
                if (temperatura > 30) fatorCorrecao += 0.3;
                if (temperatura > 35) fatorCorrecao += 0.5;
                
                // Ajustes por tempo
                if (idadeConcreto > 90) fatorCorrecao += 0.5;
                if (idadeConcreto > 120) fatorCorrecao += 0.8;
                
                // Ajustes por agregado
                if (tipoAgregado === 'Brita 0') fatorCorrecao += 0.3;
                if (tipoAgregado === 'Seixo') fatorCorrecao -= 0.2;

                // Cálculo de água adicional
                const aguaAdicionalPorM3 = (slumpNecessario / 10) * fatorCorrecao;
                const aguaTotalAdicional = aguaAdicionalPorM3 * volume;

                // Nova relação a/c
                const aguaTotalNova = aguaPrevista * volume + aguaTotalAdicional;
                const cimentoTotal = consumoCimento * volume;
                const novaRelacaoAC = aguaTotalNova / cimentoTotal;

                // Limite de segurança (5% acima)
                const limiteSeguranca = relacaoACProjeto * 1.05;

                if (novaRelacaoAC <= relacaoACProjeto) {
                    // Correção permitida
                    resultado = {
                        classificacao: 'permitida',
                        titulo: 'CORREÇÃO PERMITIDA',
                        mensagem: 'Correção com água permitida dentro dos limites normativos.',
                        permitido: true,
                        aguaAdicional: aguaTotalAdicional,
                        aguaPorM3: aguaAdicionalPorM3,
                        novaRelacaoAC: novaRelacaoAC,
                        riscos: ['Monitorar homogeneidade após adição']
                    };
                } else if (novaRelacaoAC <= limiteSeguranca) {
                    // Permitida com ressalvas
                    resultado = {
                        classificacao: 'permitida-ressalvas',
                        titulo: 'CORREÇÃO COM RESSALVAS',
                        mensagem: 'Correção próxima ao limite. Adicionar água com extrema cautela e registrar ajuste.',
                        permitido: true,
                        aguaAdicional: aguaTotalAdicional,
                        aguaPorM3: aguaAdicionalPorM3,
                        novaRelacaoAC: novaRelacaoAC,
                        riscos: [
                            'Próximo ao limite de a/c',
                            'Pode afetar resistência marginalmente',
                            'Exige controle rigoroso de adição',
                            'Aumentar amostragem de CPs'
                        ],
                        alertaNormativo: 'NBR 12655: A relação a/c está no limite. Aumentar o controle tecnológico.'
                    };
                } else {
                    // Não permitida - usar aditivo
                    let aditivoRecomendado = 0;
                    let mensagemAditivo = '';

                    if (aditivo === 'nenhum') {
                        if (slumpNecessario <= 30) {
                            aditivoRecomendado = consumoCimento * volume * 0.004;
                            mensagemAditivo = 'SOLUÇÃO: Adicionar plastificante.';
                        } else {
                            aditivoRecomendado = consumoCimento * volume * 0.012;
                            mensagemAditivo = 'SOLUÇÃO: Adicionar superplastificante.';
                        }
                    } else if (aditivo === 'plastificante') {
                        aditivoRecomendado = consumoCimento * volume * 0.003;
                        mensagemAditivo = 'SOLUÇÃO: Adicionar dose complementar de plastificante.';
                    } else {
                        aditivoRecomendado = consumoCimento * volume * 0.005;
                        mensagemAditivo = 'SOLUÇÃO: Adicionar dose complementar de superplastificante.';
                    }

                    resultado = {
                        classificacao: 'nao-permitida',
                        titulo: 'CORREÇÃO NÃO PERMITIDA',
                        mensagem: 'Adição de água PROIBIDA - ultrapassaria a relação a/c de projeto. ' + mensagemAditivo,
                        permitido: false,
                        aguaAdicional: 0,
                        aditivoRecomendado: aditivoRecomendado,
                        aditivoPercentual: (aditivoRecomendado / cimentoTotal * 100).toFixed(2),
                        novaRelacaoAC: novaRelacaoAC,
                        riscos: [
                            'Violação da relação a/c de projeto',
                            'Perda significativa de resistência',
                            'Comprometimento da durabilidade',
                            'Aumento de permeabilidade',
                            'Risco de fissuração por retração'
                        ],
                        alertaNormativo: 'NBR 12655 Art. 6.2.2: Concretos que não atendem aos requisitos de dosagem devem ser rejeitados ou corrigidos com aditivos, nunca com água adicional que ultrapasse a relação a/c especificada.'
                    };
                }

                resultado.diferencaSlump = Math.abs(diferencaSlump);
                resultado.limiteAC = relacaoACProjeto;
            }

            // Exibir resultados
            exibirResultados(resultado, {
                slumpMedido,
                slumpProjeto,
                volume,
                temperatura,
                idadeConcreto,
                elementoEstrutural,
                consumoCimento
            });
        }

        function exibirResultados(resultado, dados) {
            // Esconder estado vazio e mostrar resultados
            document.getElementById('emptyState').style.display = 'none';
            document.getElementById('resultsContainer').classList.add('show');

            // Status Card
            const statusCard = document.getElementById('statusCard');
            statusCard.className = 'status-card ' + resultado.classificacao;
            
            document.getElementById('statusTitle').textContent = resultado.titulo;
            document.getElementById('statusMessage').textContent = resultado.mensagem;

            // Ícone de status
            const statusIcon = document.getElementById('statusIcon');
            if (resultado.classificacao === 'adequado' || resultado.classificacao === 'permitida') {
                statusIcon.innerHTML = '<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>';
                statusIcon.className = 'status-icon success';
            } else if (resultado.classificacao === 'permitida-ressalvas') {
                statusIcon.innerHTML = '<path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>';
                statusIcon.className = 'status-icon warning';
            } else {
                statusIcon.innerHTML = '<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>';
                statusIcon.className = 'status-icon error';
            }

            // Dados técnicos
            document.getElementById('displaySlumpMedido').textContent = dados.slumpMedido + ' mm';
            document.getElementById('displaySlumpProjeto').textContent = dados.slumpProjeto + ' mm';

            // Diferença
            if (resultado.diferencaSlump !== undefined) {
                document.getElementById('diferencaBox').classList.remove('hidden');
                const dif = dados.slumpMedido - dados.slumpProjeto;
                document.getElementById('displayDiferenca').textContent = (dif > 0 ? '+' : '') + dif.toFixed(0) + ' mm';
            } else {
                document.getElementById('diferencaBox').classList.add('hidden');
            }

            // Água adicional
            if (resultado.aguaAdicional > 0) {
                document.getElementById('aguaBox').classList.remove('hidden');
                document.getElementById('displayAgua').textContent = resultado.aguaAdicional.toFixed(1) + ' L';
                document.getElementById('displayAguaM3').textContent = resultado.aguaPorM3.toFixed(1) + ' L/m³';

                document.getElementById('acGrid').classList.remove('hidden');
                document.getElementById('displayACOriginal').textContent = resultado.limiteAC.toFixed(3);
                document.getElementById('displayNovaAC').textContent = resultado.novaRelacaoAC.toFixed(3);
            } else {
                document.getElementById('aguaBox').classList.add('hidden');
                document.getElementById('acGrid').classList.add('hidden');
            }

            // Aditivo
            if (resultado.aditivoRecomendado > 0) {
                document.getElementById('aditivoBox').classList.remove('hidden');
                document.getElementById('displayAditivo').textContent = resultado.aditivoRecomendado.toFixed(2) + ' L';
                document.getElementById('displayAditivoPercent').textContent = resultado.aditivoPercentual + '% sobre massa de cimento';
            } else {
                document.getElementById('aditivoBox').classList.add('hidden');
            }

            // Riscos
            if (resultado.riscos && resultado.riscos.length > 0) {
                document.getElementById('risksCard').classList.remove('hidden');
                const risksList = document.getElementById('risksList');
                risksList.innerHTML = '';
                resultado.riscos.forEach(risco => {
                    const li = document.createElement('li');
                    li.textContent = risco;
                    risksList.appendChild(li);
                });
            } else {
                document.getElementById('risksCard').classList.add('hidden');
            }

            // Alerta normativo
            if (resultado.alertaNormativo) {
                document.getElementById('alertCard').classList.remove('hidden');
                document.getElementById('alertText').textContent = resultado.alertaNormativo;
            } else {
                document.getElementById('alertCard').classList.add('hidden');
            }

            // Resumo executivo
            const agora = new Date();
            document.getElementById('summaryData').textContent = agora.toLocaleString('pt-BR');
            document.getElementById('summaryVolume').textContent = dados.volume + ' m³';
            document.getElementById('summaryElemento').textContent = dados.elementoEstrutural.toUpperCase();
            document.getElementById('summarySlump').textContent = 'Medido ' + dados.slumpMedido + 'mm / Projeto ' + dados.slumpProjeto + 'mm';

            const actionElement = document.getElementById('summaryAction');
            if (resultado.permitido) {
                if (resultado.aguaAdicional > 0) {
                    actionElement.textContent = '✓ ADICIONAR ' + resultado.aguaAdicional.toFixed(1) + ' LITROS DE ÁGUA';
                    actionElement.className = 'summary-action';
                } else if (resultado.aditivoRecomendado > 0) {
                    actionElement.textContent = '✓ ADICIONAR ' + resultado.aditivoRecomendado.toFixed(2) + ' LITROS DE ADITIVO';
                    actionElement.className = 'summary-action';
                } else {
                    actionElement.textContent = '✓ CONCRETO ADEQUADO - PROSSEGUIR COM LANÇAMENTO';
                    actionElement.className = 'summary-action';
                }
            } else {
                if (resultado.aditivoRecomendado > 0) {
                    actionElement.textContent = '✗ USAR ADITIVO: ' + resultado.aditivoRecomendado.toFixed(2) + ' L';
                    actionElement.className = 'summary-action reject';
                } else {
                    actionElement.textContent = '✗ REJEITAR CARGA';
                    actionElement.className = 'summary-action reject';
                }
            }

            // Scroll suave para os resultados
            document.getElementById('resultsContainer').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
